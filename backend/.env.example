# =======================
# Afroo Exchange V4 - Backend Configuration
# =======================
# Copy this file to .env and fill in your actual values
# Generate secure keys with: openssl rand -hex 32

# =======================
# Application Settings
# =======================
APP_NAME=Afroo Exchange API
VERSION=4.0.0
ENVIRONMENT=development
DEBUG=false
LOG_LEVEL=info

# =======================
# Database
# =======================
# ⚠️  CRITICAL: DO NOT CHANGE MongoDB password in PRODUCTION!
# The database password is tied to the encryption system
# MongoDB Connection String
# Format: mongodb://username:password@host:port/database?authSource=admin
MONGODB_URL=mongodb://afroo_user:your_mongo_password@localhost:27017/afroo_v4?authSource=admin
DATABASE_NAME=afroo_v4

# =======================
# Redis Cache & Sessions
# =======================
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password

# =======================
# Security & Encryption
# =======================
# ⚠️  CRITICAL: DO NOT CHANGE ENCRYPTION_KEY IN PRODUCTION!
# Changing this key will break decryption of ALL existing private keys in database
# This would result in complete loss of access to all wallet funds
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ENCRYPTION_KEY=your_fernet_encryption_key_here

# JWT Tokens
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your_jwt_secret_key_here
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=30

# =======================
# Discord Integration
# =======================
# OAuth2 Application (from Discord Developer Portal)
DISCORD_CLIENT_ID=your_discord_client_id
DISCORD_CLIENT_SECRET=your_discord_client_secret
DISCORD_REDIRECT_URI=http://localhost:3000/auth/callback

# Discord Bot Token (Main Bot)
DISCORD_BOT_TOKEN=your_discord_bot_token

# Discord API Endpoint (usually don't change)
DISCORD_API_ENDPOINT=https://discord.com/api/v10

# Discord Server (Guild) ID
DISCORD_GUILD_ID=your_discord_server_id

# Admin User IDs (Personal Discord accounts with admin access)
DISCORD_HEAD_ADMIN_USER_ID=your_head_admin_discord_user_id
DISCORD_ASSISTANT_ADMIN_USER_ID=your_assistant_admin_discord_user_id

# Discord Role IDs (for permission validation)
ROLE_HEAD_ADMIN=your_head_admin_role_id
ROLE_ASSISTANT_ADMIN=your_assistant_admin_role_id
ROLE_STAFF=your_staff_role_id
ROLE_EXCHANGER=your_exchanger_role_id
ROLE_CUSTOMER=your_customer_role_id

# Customer Tier Role IDs (for tier sync system)
TIER_ROLE_LEGEND=your_legend_tier_role_id
TIER_ROLE_ELITE=your_elite_tier_role_id
TIER_ROLE_DIAMOND=your_diamond_tier_role_id
TIER_ROLE_PLATINUM=your_platinum_tier_role_id
TIER_ROLE_GOLD=your_gold_tier_role_id
TIER_ROLE_SILVER=your_silver_tier_role_id
TIER_ROLE_BRONZE=your_bronze_tier_role_id

# Bot-to-API Authentication Token
# Generate with: openssl rand -hex 32
BOT_SERVICE_TOKEN=your_bot_service_token_here

# =======================
# Blockchain (Tatum)
# =======================
# Get API key from: https://dashboard.tatum.io
TATUM_API_KEY=your_tatum_api_key
TATUM_API_URL=https://api.tatum.io

# Webhook Configuration
# Generate with: openssl rand -hex 32
TATUM_WEBHOOK_SECRET=your_tatum_webhook_secret
# Your public API URL for receiving webhooks
TATUM_WEBHOOK_BASE_URL=https://api.yourdomain.com

# =======================
# Admin Wallets (Platform Wallets)
# =======================
# These are the platform's wallet addresses where users send deposits
# DO NOT share the private keys for these addresses
ADMIN_WALLET_BTC=your_bitcoin_address_here
ADMIN_WALLET_LTC=your_litecoin_address_here
ADMIN_WALLET_ETH=your_ethereum_address_here
ADMIN_WALLET_SOL=your_solana_address_here
ADMIN_WALLET_USDC_SOL=your_usdc_on_solana_address_here
ADMIN_WALLET_USDC_ETH=your_usdc_on_ethereum_address_here
ADMIN_WALLET_USDT_SOL=your_usdt_on_solana_address_here
ADMIN_WALLET_USDT_ETH=your_usdt_on_ethereum_address_here
ADMIN_WALLET_XRP=your_ripple_address_here
ADMIN_WALLET_BNB=your_binance_coin_address_here
ADMIN_WALLET_TRX=your_tron_address_here
ADMIN_WALLET_MATIC=your_polygon_address_here
ADMIN_WALLET_AVAX=your_avalanche_address_here
ADMIN_WALLET_DOGE=your_dogecoin_address_here

# =======================
# Swap Provider (ChangeNow)
# =======================
# Get API key from: https://changenow.io/api
CHANGENOW_API_KEY=your_changenow_api_key

# =======================
# AI / OpenAI
# =======================
# Get API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=500
OPENAI_TEMPERATURE=0.7

# =======================
# Notifications
# =======================
# Notifications are sent via:
# 1. Discord bot DMs (primary)
# 2. Website dashboard notifications (in-app)
# Email notifications are NOT used

# =======================
# CORS Settings
# =======================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://yourdomain.com,https://www.yourdomain.com

# =======================
# API Configuration
# =======================
API_V1_PREFIX=/api/v1
PROJECT_NAME=Afroo Exchange
# Public URL for transcript links and external references
PUBLIC_URL=https://yourdomain.com

# =======================
# Wallet System Configuration
# =======================
# Server profit rate (0.02 = 2% fee on exchanges)
SERVER_PROFIT_RATE=0.02
# Minimum profit in USD to hold
MIN_PROFIT_USD=1.0
# Profit batch threshold in USD
PROFIT_BATCH_THRESHOLD_USD=100.0
# Withdrawal limits in USD
WITHDRAWAL_MIN_USD=10.0
WITHDRAWAL_MAX_USD=10000.0
# Large withdrawal threshold for admin approval
LARGE_WITHDRAWAL_THRESHOLD_USD=1000.0

# =======================
# Rate Limiting
# =======================
# General API rate limit (requests per minute per IP)
RATE_LIMIT_PER_MINUTE=100

# Wallet operations (more restricted)
RATE_LIMIT_WALLET_OPS=20

# Exchange creation (most restricted)
RATE_LIMIT_EXCHANGE_CREATE=10

# =======================
# File Uploads
# =======================
# Maximum file size in MB for ticket attachments
MAX_UPLOAD_SIZE_MB=10

# Comma-separated allowed file types
ALLOWED_FILE_TYPES=.jpg,.jpeg,.png,.pdf,.txt

# =======================
# Monitoring (Optional)
# =======================
# Sentry DSN for error tracking
# Get from: https://sentry.io
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =======================
# Feature Flags
# =======================
# Enable/disable features for gradual rollout
FEATURE_AI_ENABLED=true
FEATURE_SWAPS_ENABLED=true
FEATURE_WITHDRAWALS_ENABLED=true

# =======================
# Development Settings
# =======================
# Set to true in local development to see verbose logs
# NEVER set to true in production!
# DEBUG=true

# =======================
# Production Settings Example
# =======================
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=warning
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# TATUM_WEBHOOK_BASE_URL=https://api.yourdomain.com
# DISCORD_REDIRECT_URI=https://yourdomain.com/auth/callback

# =======================
# Quick Setup Commands
# =======================
# 1. Generate ENCRYPTION_KEY:
#    python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# 2. Generate JWT_SECRET_KEY and BOT_SERVICE_TOKEN:
#    openssl rand -hex 32
#
# 3. Generate TATUM_WEBHOOK_SECRET:
#    openssl rand -hex 32
#
# 4. Install dependencies:
#    pip install -r requirements.txt
#
# 5. Run migrations (if applicable):
#    python scripts/init_db.py
#
# 6. Start the server:
#    uvicorn app.main:app --reload
